<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Community — Home</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header>
  <h1><a href="/">Community</a></h1>
  {% if user %}
    <div class="meta">안녕하세요, {{ user['username'] }} | <a href="/logout">로그아웃</a> | <a href="/post/new">새 글</a> | <a href="/user/{{ user['username'] }}">내 프로필</a></div>
  {% else %}
    <div class="meta"><a href="/login">로그인</a> | <a href="/register">회원가입</a></div>
  {% endif %}
  <form action="/search" method="get" class="search"><input name="q" placeholder="검색..." value="{{ '' if q is not defined else q }}"><button>검색</button></form>
</header>
<main>
  {% for p in posts %}
    <article class="post">
      <h2><a href="/post/{{ p['id'] }}">{{ p['title'] }}</a></h2>
      <div class="by">by <a href="/user/{{ p['username'] }}">{{ p['username'] }}</a> — {{ p['created'] }}</div>
      <p>{{ p['body'][:200] }}{% if p['body']|length > 200 %}...{% endif %}</p>
    </article>
  {% else %}
    <p>작성된 글이 없습니다.</p>
  {% endfor %}
</main>
</body>
</html>
